DIET-PAGE
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Doclinic - Doctor Report</title>
  <link rel="icon" href="https://medical-admin-template.multipurposethemes.com/images/favicon.ico">
  <!-- html2pdf.js for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  {% include "style.html" %}
  {% include "vendor_styles.html" %}
  <!-- {% include "script.html" %} -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    /* Report styling */
    body {
      font-family: 'Times New Roman', serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .container {
      background: #fff;
      padding: 30px;
      margin: auto;
      max-width: 800px;
      border: 2px solid #000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      text-transform: uppercase;
      margin-bottom: 10px;
      font-size: 24px;
    }
    .subtitle {
      text-align: center;
      margin-bottom: 20px;
      font-style: italic;
    }
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
      text-align: left;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px;
      background: #00529b;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover { background: #063970; }
    .section {
      margin-top: 30px;
      padding: 20px;
      border: 1px solid #000;
      border-radius: 4px;
      page-break-inside: avoid;
    }
    .section-header {
      font-size: 18px;
      font-weight: bold;
      text-align: left;
      margin-bottom: 15px;
      border-bottom: 1px solid #000;
      padding-bottom: 5px;
    }
    .meal-grid {
      display: flex;
      justify-content: space-between;
      text-align: left;
    }
    .meal-section { width: 30%; }
    .meal-section h4 { margin-bottom: 10px; }
    .meal-section ul { list-style: none; padding: 0; }
    .meal-section li { margin-bottom: 8px; font-size: 14px; }
    #fitnessExercises li {
      margin-bottom: 8px;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
    }
    #fitnessExercises li.completed { text-decoration: line-through; color: #777; }
    @media print {
      body { background: #fff; padding: 0; }
      .container { border: none; box-shadow: none; }
      button, input, select { display: none; }
    }
  </style>
</head>
<body>
  {% include "header.html" %}
  
  <div class="container" id="summaryContainer">
    <h1>Patient Health & Fitness Report</h1>
    <p class="subtitle">Generated by Doclinic System</p>

    <!-- Inputs -->
    <label>Age*</label>
    <input type="number" id="age" required min="1">
    <label>Gender*</label>
    <select id="gender" required><option value="" disabled selected>Select</option><option value="male">Male</option><option value="female">Female</option></select>
    <label>Height (cm)*</label>
    <input type="number" id="height" required min="50">
    <label>Weight (kg)*</label>
    <input type="number" id="weight" required min="10">
    <label>Activity Level*</label>
    <select id="activity" required><option value="" disabled selected>Select</option><option value="sedentary">Sedentary</option><option value="light">Lightly active</option><option value="moderate">Moderately active</option><option value="high">Very active</option><option value="extreme">Super active</option></select>
    <label>Diet Preference*</label>
    <select id="food-preference" required><option value="" disabled selected>Select</option><option value="veg">Vegetarian</option><option value="non-veg">Non-Vegetarian</option><option value="eggitarian">Eggitarian</option></select>
    <label>Allergies*</label>
    <input type="text" id="allergies" required placeholder="e.g. nuts, dairy">
    <button onclick="generateHealthPlan()">Generate Report</button>

    <!-- Health Summary -->
    <div id="result" class="section">
      <div class="section-header">Health Summary</div>
      <p><strong>BMI:</strong> <span id="bmi"></span></p>
      <p><strong>Water Intake:</strong> <span id="water"></span> L/day</p>
      <p><strong>Calories Needed:</strong> <span id="calories"></span> kcal/day</p>
    </div>

    <!-- Meal Plan -->
    <div id="mealPlan" class="section">
      <div class="section-header">Meal Plan</div>
      <div class="meal-grid">
        <div class="meal-section"><h4>Breakfast</h4><ul id="breakfast"></ul></div>
        <div class="meal-section"><h4>Lunch</h4><ul id="lunch"></ul></div>
        <div class="meal-section"><h4>Dinner</h4><ul id="dinner"></ul></div>
      </div>
      <button onclick="rotateMeals()">Rotate Meals</button>
    </div>

    <!-- Fitness Plan -->
    <div id="fitnessPlan" class="section">
      <div class="section-header">Fitness Plan</div>
      <label>Goal*</label>
      <select id="fitness-goal" required><option value="" disabled selected>Select</option><option value="exercise">Exercise</option><option value="yoga">Yoga</option><option value="pilates">Pilates</option></select>
      <button onclick="generateFitnessPlan()">Show Routine</button>
      <ul id="fitnessExercises"></ul>
    </div>

    <button id="downloadPdfBtn" style="display:none;">Download as PDF</button>
  </div>
  <?php include 'footer.php';?>
  <script>
    const mealOptions = {
      veg: ["Oatmeal with fruits","Avocado toast","Veggie omelette","Smoothie bowl","Greek yogurt","Quinoa salad"],
      'non-veg': ["Egg & toast","Grilled chicken salad","Shrimp stir-fry","Turkey sandwich","Salmon fillet","Beef tacos"],
      eggitarian: ["Scrambled eggs","Egg wrap","Egg muffins","Deviled eggs","Egg curry","Poached eggs"]
    };
    function populateMeals(pref) {
      ['breakfast','lunch','dinner'].forEach(meal=>{
        const ul=document.getElementById(meal);ul.innerHTML='';
        const opts=[...mealOptions[pref]];
        opts.sort(()=>0.5-Math.random()).slice(0,2).forEach(item=>{
          const li=document.createElement('li');li.textContent=item;ul.appendChild(li);
        });
      });
    }
    function validateInputs(ids){return ids.every(id=>!!document.getElementById(id).value);}    
    function generateHealthPlan(){
      const req=['age','gender','height','weight','activity','food-preference','allergies']; if(!validateInputs(req))return alert('Complete all fields');
      const h=parseFloat(document.getElementById('height').value)/100,w=parseFloat(document.getElementById('weight').value),a=+document.getElementById('age').value;
      const act=document.getElementById('activity').value;
      const bmi=(w/(h*h)).toFixed(2); document.getElementById('bmi').textContent=bmi;
      document.getElementById('water').textContent=(w*0.033).toFixed(1);
      let bmr=10*w+6.25*(h*100)-5*a+(document.getElementById('gender').value==='male'?5:-161);
      document.getElementById('calories').textContent=(bmr*{sedentary:1.2,light:1.375,moderate:1.55,high:1.725,extreme:1.9}[act]).toFixed(0);
      populateMeals(document.getElementById('food-preference').value);
      document.getElementById('fitnessPlan').style.display='block'; document.getElementById('downloadPdfBtn').style.display='block';
    }
    function generateFitnessPlan(){
      if(!validateInputs(['fitness-goal']))return alert('Select a goal');
      const goal=document.getElementById('fitness-goal').value;
      const timings={exercise:[{step:1,name:'Jogging',time:'5 min'},{step:2,name:'Push-ups',time:'3 min'},{step:3,name:'Squats',time:'3 min'},{step:4,name:'Lunges',time:'3 min'},{step:5,name:'Burpees',time:'2 min'},{step:6,name:'Mountain Climbers',time:'2 min'},{step:7,name:'Jumping Jacks',time:'2 min'},{step:8,name:'High Knees',time:'2 min'},{step:9,name:'Plank',time:'1 min'},{step:10,name:'Stretching',time:'5 min'}],
                                    yoga:[{step:1,name:'Breathing',time:'5 min'},{step:2,name:'Sun Salute',time:'5 min'},{step:3,name:'Tree Pose',time:'2 min'},{step:4,name:'Warrior II',time:'2 min'},{step:5,name:'Downward Dog',time:'2 min'},{step:6,name:'Child Pose',time:'2 min'},{step:7,name:'Bridge',time:'2 min'},{step:8,name:'Cat-Cow',time:'3 min'},{step:9,name:'Cobra',time:'2 min'},{step:10,name:'Corpse Pose',time:'5 min'}],
                                    pilates:[{step:1,name:'The Hundred',time:'1 min'},{step:2,name:'Roll-Up',time:'2 min'},{step:3,name:'Leg Circles',time:'2 min'},{step:4,name:'Plank Lifts',time:'2 min'},{step:5,name:'Swan',time:'2 min'},{step:6,name:'Teaser',time:'2 min'},{step:7,name:'Single Leg',time:'2 min'},{step:8,name:'Double Leg',time:'2 min'},{step:9,name:'Spine Stretch',time:'2 min'},{step:10,name:'Roll Over',time:'2 min'}]};
      const ul=document.getElementById('fitnessExercises');ul.innerHTML='';
      timings[goal].forEach(item=>{
        const li=document.createElement('li');
        li.innerHTML=`<span class='info'><strong>Step ${item.step}:</strong> ${item.name}</span><span>${item.time}</span>`;
        ul.appendChild(li);
      });
    }
    document.getElementById('downloadPdfBtn').onclick=()=>{html2pdf().from(document.getElementById('summaryContainer')).set({margin:0.5,filename:'Doctor_Report.pdf',html2canvas:{scale:2}}).save();};
    function rotateMeals(){populateMeals(document.getElementById('food-preference').value);}  
  </script>
  	{% include "footer.html" %}
    
</body>
</html>
