<header class="main-header" style="position: relative;">
	<div class="d-flex align-items-center logo-box justify-content-start" style="position: fixed; top: 0; left: 0; padding-top: 0; padding-left: 50px; z-index: 101;">
	  <!-- Logo -->
	  <a href="/" class="logo">
		<div class="logo-mini w-50">
		  <span class="light-logo">
			<img src="{{ url_for('static', filename='images/logo-letter.png') }}" alt="logo">
		  </span>
		  <span class="dark-logo">
			<img src="{{ url_for('static', filename='images/logo-letter.png') }}" alt="logo">
		  </span>
		</div>
		<div class="logo-lg">
		  <span class="light-logo">
			<img src="{{ url_for('static', filename='images/logo-dark-text.png') }}" alt="logo">
		  </span>
		  <span class="dark-logo">
			<img src="{{ url_for('static', filename='images/logo-light-text.png') }}" alt="logo">
		  </span>
		</div>
	  </a>  
	</div>  
  
	<nav class="navbar navbar-static-top" style="position: fixed; top: 0; left: 0; right: 0; padding-top: 0; margin-top: 0; padding-left: 200px; padding-bottom: 10px; z-index: 100;">
	  <div class="app-menu">
		<ul class="header-megamenu nav ms-auto" style="font-size: 1.25rem; padding-top: 10px; padding-bottom: 10px;">
		  <li class="nav-item">
			<a href="/about" class="nav-link fs-5" style="padding-right: 20px;" target="_blank">About</a>
		  </li>
		  <li class="nav-item">
			<a href="/latest_prediction" class="nav-link fs-5" style="padding-right: 20px;" target="_blank">Blood Group</a>
		  </li>
		  <li class="nav-item">
			<a id="loginBtn" class="nav-link fs-5" href="/login_form" style="padding-right: 20px;">Login</a>
			<a id="logoutBtn" class="nav-link fs-5" href="#" onclick="logout()" style="display: none; padding-right: 20px;">Logout</a>

		  </li>
		  <li class="dropdown nav-item">
			<a href="#" class="waves-effect waves-light dropdown-toggle nav-link fs-5" data-bs-toggle="dropdown" title="Services" style="padding-right: 20px;">
			  Services
			</a>
			<ul class="dropdown-menu animated flipIn">
			  <li><a class="dropdown-item" href="/diet" target="_blank">Diet & Fitness</a></li>
			  <li><a class="dropdown-item" href="/basic" target="_blank">Blood Group - Diabetes - Blood Pressure</a></li>
			  <li><a class="dropdown-item" href="/dash" target="_blank">Cardio & Neuro</a></li>
			  <li><a class="dropdown-item" href="/about" target="_blank">About</a></li>
			  <li><a class="dropdown-item" href="/chatbot" target="_blank">Chatbot</a></li>
			  <li><a class="dropdown-item" href="/dashboard" target="_blank">Dashboard</a></li>
			  <li><a class="dropdown-item" href="/latest_prediction" target="_blank">Predict Your Blood Group</a></li>
			</ul>
		  </li>
		</ul>
	  </div>
	</nav>
  
	{% include "script.html" %}
	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
	<script>
	  // Function to handle login
	  

	  // Check login status on page load
	  function updateAuthButtons() {
    fetch('/check_login_status')
      .then(response => response.json())
      .then(data => {
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');

        if (data.logged_in) {
          loginBtn.style.display = 'none';
          logoutBtn.style.display = 'block';
        } else {
          loginBtn.style.display = 'block';
          logoutBtn.style.display = 'none';
        }
      })
      .catch(err => console.error('Error checking login status:', err));
  }

  document.addEventListener("DOMContentLoaded", updateAuthButtons);

	  // Logout function
	  function logout() {
		fetch('/logout', { method: 'POST' })
		  .then(() => {
			sessionStorage.removeItem('user_id');
			alert('Logged out successfully!');
			document.getElementById('loginBtn').style.display = 'block';
			document.getElementById('logoutBtn').style.display = 'none';
			window.location.href = '/login_form';
		  })
		  .catch(error => alert('Error logging out: ' + error));
	  }
	</script>
</header>
